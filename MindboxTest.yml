apiVersion: apps/v1
kind: Deployment
metadata:
  name: mbapp
  namespace: nsname #Имя зоны
spec:
  replicas: 4 #pods
  selector:
    matchLabels:
      app: mbapp
  template:
    metadata:
      labels:
        app: mbapp
    spec:
      containers:
      - name: mbapp
        image: <Image> #Указать образ
        resources:
           requests:
            cpu: 100m  # Минимальный запрос CPU
            memory: 128Mi
           limits:
            cpu: 500m  # Повышенный лимит CPU для инициализации
            memory: 128Mi
        ports:
        - containerPort: 80
        - containerPort: 443

# 'у нас мультизональный кластер (три зоны), в котором пять нод' в спецификации к деплою нужно указать namespace
#
#'приложение требует около 5-10 секунд для инициализации' к сожалению я не знаю что делать с этой информацией( 
# Она относится непосредственно к поду, поэтому я обратился в раздел workload-resources/pod-v1/#PodSpec документации
# Если нужно мониторить запуск/работу в заданный период, подходят ключи livenessProbe/readinessProbe
# но у меня нет опыта их использования в манифесте, т.к. это веб приложение, должен быть способ проверить порт/контент
#
#'по результатам нагрузочного теста известно, что 4 пода справляются с пиковой нагрузкой' в спецификации к деплою нужно указать replicas
#
#'приложение имеет дневной цикл по нагрузке – ночью запросов на порядки меньше, пик – днём' я не смог выяснить как сделать это средствами кубера
# можно создать второй манифест на меньшее количество подов, и применять его по расписанию в cron
#
# 'хотим максимально отказоустойчивый deployment' я думал что сама сущность деплоя с репликами жде подразумевает отказоустойчивость...
# нейросеть предложила использовать podAntiAffinity для распределения подов по разным нодам
#
#
#
#
#
#
#